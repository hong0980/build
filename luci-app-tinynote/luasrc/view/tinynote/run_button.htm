<!-- 定义一个样式表 -->
<style>
    /* 定义弹窗遮罩层的样式 */
    .alert-mask {
        position: fixed; /* 固定定位 */
        display: flex; /* 使用 Flex 布局 */
        flex-direction: row; /* 设置主轴为水平方向 */
        align-items: center; /* 主轴上的对齐方式为居中对齐 */
        justify-content: center; /* 交叉轴上的对齐方式为居中对齐 */
        top: 0; /* 距离顶部为0 */
        left: 0; /* 距离左侧为0 */
        width: 100%; /* 宽度100% */
        height: 100%; /* 高度100% */
        z-index: 9999; /* 设置层级，使其在最上层显示 */
        background: rgba(0, 0, 0, 0.5); /* 设置背景颜色，使用半透明黑色 */
    }

    /* 定义弹窗容器的样式 */
    .alert-container {
        border-left: 5px solid #fff; /* 左边框，颜色为白色 */
        border-right: 5px solid #fff; /* 右边框，颜色为白色 */
        min-width: 500px;/* 最小宽度为500像素 */
        max-width: 1000px;/* 最大宽度为1000像素 */
        max-height: 70vh;/* 最大高度为屏幕高度的70% */
        overflow: auto;/* 超出部分自动滚动 */
        background-color: #fff; /* 白色背景 */
        border-radius: 5px; /* 圆角边框 */
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3); /* 设置阴影效果 */
    }

    /* 定义弹窗标题的样式 */
    .alert-title {
        font-size: 20px;/* 设置字体大小为20像素  */
        font-weight: bold;/* 设置字体加粗 */
        text-align: center;/* 文本居中对齐 */
        margin-top: 10px;/* 上边距为10像素 */
        margin-bottom: 10px;/* 下边距为10像素 */
    }

    .alert-content pre {
        text-align: left; /* 文字左对齐 */
        font-size: 14px; /* 字体大小为14像素 */
        background-color: black; /* 背景颜色为黑色 */
        font-family: Consolas; /* 字体设置为Consolas */
        color: white; /* 字体颜色为白色 */
    }

    /* 定义弹窗确认按钮的父容器样式 */
    .alert-confirm {
        display: flex; /* 使用 Flexbox 布局 */
        justify-content: center; /* 在主轴上居中对齐 */
        align-items: center; /* 在交叉轴上居中对齐 */
        margin: 20px 0; /* 上下边距为 20 像素，左右边距为 0 */
    }

    /* 定义弹窗确认按钮的样式 */
    .alert-btn {
        cursor: pointer; /* 鼠标移上去变成手型 */
        padding: 8px 10px; /* 上下内边距为8像素，左右内边距为10像素 */
        border: none; /* 去除边框 */
        border-radius: 5px; /* 圆角边框 */
        color: #fff; /* 字体颜色为白色 */
        background-color: hsl(214, 90%, 52%); /* 深蓝色背景 */
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3); /* 设置阴影效果 */
        transition: all 0.2s ease-in-out; /* 添加过渡效果 */
    }

    /* 定义弹窗确认按钮的悬浮样式 */
    .alert-btn:hover {
        background-color: hsl(0, 90%, 42%); /* 略微调暗颜色 */
    }
</style>

<!-- 定义一个JavaScript脚本 -->
<script type="text/javascript">
    /* 定义一个自定义的弹窗函数alert，接收msg参数 */
    function alert(msg){
        var body = document.getElementsByTagName('body')[0]; // 获取body元素

        var alertMask = document.createElement('div'); // 创建弹窗遮罩层
        alertMask.className = 'alert-mask'; // 设置样式类名

        var alertContainer = document.createElement('div'); // 创建弹窗容器
        alertContainer.className = 'alert-container'; // 设置样式类名

        var alertTitle = document.createElement('div'); // 创建弹窗标题
        alertTitle.className = 'alert-title'; // 设置样式类名
        alertTitle.innerHTML = '运行展示'; // 设置标题内容

        var alertContent = document.createElement('div'); // 创建弹窗内容
        alertContent.className = 'alert-content'; // 设置样式类名
        alertContent.innerHTML = msg; // 设置内容

        var alertConfirm = document.createElement('div'); // 创建弹窗确认按钮的父容器
        alertConfirm.className = 'alert-confirm'; // 设置样式类名

        var alertBtn = document.createElement('button'); // 创建弹窗确认按钮
        alertBtn.className = 'alert-btn'; // 设置样式类名
        alertBtn.innerHTML = '关闭'; // 设置按钮文本内容

        alertBtn.onclick = function() { // 给确认按钮添加点击事件
            body.removeChild(alertMask); // 移除遮罩层
        }

        alertConfirm.appendChild(alertBtn); // 将确认按钮添加到按钮父容器中
        alertContainer.appendChild(alertTitle); // 将标题添加到弹窗容器中
        alertContainer.appendChild(alertContent); // 将内容添加到弹窗容器中
        alertContainer.appendChild(alertConfirm); // 将确认按钮父容器添加到弹窗容器中
        alertMask.appendChild(alertContainer); // 将弹窗容器添加到遮罩层中
        body.appendChild(alertMask); // 将遮罩层添加到body元素中
    }

  function onclick_awake() {
    XHR.get('<%=url("admin/nas/tinynote/run_button")%>', null,
      function(x, data) {
      if (x.status == 200) {
        alert("<pre>" + data.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") + "</pre>");
      } else {
        alert('请求失败，状态码: ' + x.status);
      }
    })
  }

</script>

<div style="display: inline-block; margin-right: 10px; margin-left: 20px; padding-bottom: 20px;">
  <% if self:cfgvalue(section) ~= false then %>
    <input class="cbi-button cbi-button-<%=self.inputstyle or 'button' %>" type='button'" onclick="onclick_awake(this.id)"
      <% if self.disable then %>
        disabled
      <% end %>
    <%=attr("name", cbid) .. attr("id", cbid) .. attr("value", self.inputtitle or self.title)%>/>
  <% else %>
    -
  <% end %>
</div>
