<style>
    .CodeMirror {
        font-size: 14px;
        line-height: 140%;
        resize: both !important;
        text-align: left !important;
        font-family: Consolas, monospace !important;
    }
</style>

<link rel="stylesheet" href="/luci-static/resources/codemirror/lib/codemirror.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/theme/idea.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/theme/material.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/addon/lint/lint.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/addon/dialog/dialog.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/addon/fold/foldgutter.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/addon/display/fullscreen.css">
<link rel="stylesheet" href="/luci-static/resources/codemirror/addon/search/matchesonscrollbar.css">
<script src="/luci-static/resources/codemirror/lib/codemirror.js"></script>
<script src="/luci-static/resources/codemirror/mode/lua/lua.js"></script>
<script src="/luci-static/resources/codemirror/mode/yaml/yaml.js"></script>
<script src="/luci-static/resources/codemirror/mode/shell/shell.js"></script>
<script src="/luci-static/resources/codemirror/mode/python/python.js"></script>
<script src="/luci-static/resources/codemirror/mode/markdown/markdown.js"></script>
<script src="/luci-static/resources/codemirror/addon/fold/foldcode.js"></script>
<script src="/luci-static/resources/codemirror/addon/fold/foldgutter.js"></script>
<script src="/luci-static/resources/codemirror/addon/fold/indent-fold.js"></script>
<script src="/luci-static/resources/codemirror/addon/fold/markdown-fold.js"></script>
<script src="/luci-static/resources/codemirror/addon/edit/matchbrackets.js"></script>
<script src="/luci-static/resources/codemirror/addon/selection/active-line.js"></script>
<script src="/luci-static/resources/codemirror/addon/lint/lint.js"></script>
<script src="/luci-static/resources/codemirror/addon/lint/yaml-lint.js"></script>
<script src="/luci-static/resources/codemirror/addon/lint/js-yaml.min.js"></script>
<script src="/luci-static/resources/codemirror/addon/display/fullscreen.js"></script>
<script src="/luci-static/resources/codemirror/addon/display/autorefresh.js"></script>
<script src="/luci-static/resources/codemirror/addon/dialog/dialog.js"></script>
<script src="/luci-static/resources/codemirror/addon/search/search.js"></script>
<script src="/luci-static/resources/codemirror/addon/search/searchcursor.js"></script>
<script src="/luci-static/resources/codemirror/addon/search/jump-to-line.js"></script>
<script src="/luci-static/resources/codemirror/addon/search/matchesonscrollbar.js"></script>
<script src="/luci-static/resources/codemirror/addon/scroll/annotatescrollbar.js"></script>

<script type="text/javascript">//<![CDATA[

function editor(id, editor_mode, readOnly) {
    var editor = CodeMirror.fromTextArea(id, {
        mode: editor_mode,
        autoRefresh: true,
        lint: true, // 代码出错提醒
        tabSize: 4, // 制表符的宽度
        theme: "monokai", // 主题
        foldGutter: true,
        indentUnit: 4, //每个缩进块由几个空格组成。默认为2。
        smartIndent: true, //自动缩进
        styleActiveLine: true,  // 选中行高亮
        matchBrackets: true, // 光标匹配括号
        lineNumbers: true, // 是否显示行号
        lineWrapping: true, // 是否应滚动或换行以显示长行
        lineWiseCopyCut: true, // 在没有选择的情况下进行复制或剪切将复制或剪切有光标的整行。
        showCursorWhenSelecting: true, // 选择处于活动状态时是否应绘制光标
        maxHighlightLength: Infinity, // 显示长行的时候 这个值是不限制，如果要做限制的话，值是number类型
        extraKeys: {
            "F11": function(cm) {
                cm.setOption("fullScreen", !cm.getOption("fullScreen"));
            },
            "Esc": function(cm) {
                if (cm.getOption("fullScreen")) cm.setOption("fullScreen", false);
            },
            "Tab": function(cm) {
                if (cm.somethingSelected()) {
                    cm.indentSelection('add')
                } else {
                    var spaces = Array(cm.getOption("indentUnit") + 1).join(" ")
                    cm.replaceSelection(spaces)
                }
            },
        }
    });
    editor.setSize("1500px", "700px");

    if (readOnly == "true") {
        editor.setOption("readOnly","true");
    };
};

var note1 = document.getElementById("cbid.luci.tinynote.note1.lua");
var note2 = document.getElementById("cbid.luci.tinynote.note2.lua");
var note3 = document.getElementById("cbid.luci.tinynote.note3.lua");
var note4 = document.getElementById("cbid.luci.tinynote.note4.lua");
var note5 = document.getElementById("cbid.luci.tinynote.note5.lua");
var note6 = document.getElementById("cbid.luci.tinynote.note6.lua");
var note7 = document.getElementById("cbid.luci.tinynote.note7.lua");
var note8 = document.getElementById("cbid.luci.tinynote.note8.lua");

if (note1) {
    editor(note1, 'lua', 'false');
};

if (note2) {
    editor(note2, 'lua', 'false');
};

if (note3) {
    editor(note3, 'lua', 'false');
};

if (note4) {
    editor(note4, 'lua', 'false');
};

if (note5) {
    editor(note5, 'lua', 'false');
};

if (note6) {
    editor(note6, 'lua', 'false');
};

if (note7) {
    editor(note7, 'lua', 'false');
};

if (note8) {
    editor(note8, 'lua', 'false');
};

// function getValue(){
//     var x=document.getElementById("cbid.luci.tinynote.note1.lua");
//     alert(x.innerHTML);
// }

//]]></script>

<!-- <body>
    <h1 id="cbid.luci.tinynote.note1.lua" onclick="getValue()">点击我!</h1>
    <script src="/luci-static/resources/codemirror/prism.js"></script>
    <link href="/luci-static/resources/codemirror/prism.css" rel="stylesheet"/>
    <pre><code class="language-shell">
        #!/usr/bin/env sh
        uci_get_type() {
            [ "$#" -eq 3 -o "$#" -eq 4 ] || return 1
            local ret=$(uci -q get "$1"."$2"."$3")
            echo ${ret:=$4}
        }

        uci_set_network() {
            [ "$#" -eq 3 ] || return 1
            uci -q set network."$1"."$2"="$3"
        }

        uci_set_wizard() {
            [ "$#" -eq 2 ] || return 1
            uci -q set wizard.default."$1"="$2"
        }
    </code></pre>
</body> -->
